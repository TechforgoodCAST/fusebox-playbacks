<section class="nested-fields insight border blue">

  <div class="right-align">
    <%= link_to_remove_association 'Remove Insight', f, class: 'btn blue' %>
  </div>

  <div class="mb60">
    <div class="center mb30">
      <div class="tag">
        <%= f.input :name, label: 'Insight name' %>
        <%= f.input :certainty, collection: Insight::CERTAINTY %>
      </div>
    </div>

    <%= f.trix_editor :description %>
  </div>

  <%= f.input :include_retro, input_html: { class: 'toggle mb30' } %>

  <div class="flex flex-wrap mb30 hide">
    <div class="flex-col1 px15 mb30">
      <h3 class="bold center mb30">What's going well</h3>
      <%= f.trix_editor :successes %>
    </div>
    <div class="flex-col1 px15 mb30">
      <h3 class="bold center mb30">What could be improved</h3>
      <%= f.trix_editor :improvements %>
    </div>
    <div class="flex-col1 px15 mb30">
      <h3 class="bold center mb30">What have we learned</h3>
      <%= f.trix_editor :learnings %>
    </div>
  </div>

  <div class="mb60 notice"><%= f.trix_editor :notes %></div>

  <div id="steps">

    <hr>

    <h3 class="bold center my40">Next Steps</h3>

    <%= f.simple_fields_for :steps, f.object.steps.order(:created_at) do |step| %>
      <%= render 'step_fields', f: step %>
    <% end %>
    <div class="links">
      <%= link_to_add_association 'Add Step', f, :steps, class: 'btn orange' %>
    </div>
  </div>

</section>